<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<style type="text/css">
body {
  font-family: Helvetica, arial, sans-serif;
  font-size: 14px;
  line-height: 1.6;
  padding-top: 10px;
  padding-bottom: 10px;
  background-color: white;
  padding: 30px; }

body > *:first-child {
  margin-top: 0 !important; }
body > *:last-child {
  margin-bottom: 0 !important; }

a {
  color: #4183C4; }
a.absent {
  color: #cc0000; }
a.anchor {
  display: block;
  padding-left: 30px;
  margin-left: -30px;
  cursor: pointer;
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0; }

h1, h2, h3, h4, h5, h6 {
  margin: 20px 0 10px;
  padding: 0;
  font-weight: bold;
  -webkit-font-smoothing: antialiased;
  cursor: text;
  position: relative; }

h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA09pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoMTMuMCAyMDEyMDMwNS5tLjQxNSAyMDEyLzAzLzA1OjIxOjAwOjAwKSAgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUM2NjlDQjI4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUM2NjlDQjM4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5QzY2OUNCMDg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5QzY2OUNCMTg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsQhXeAAAABfSURBVHjaYvz//z8DJYCRUgMYQAbAMBQIAvEqkBQWXI6sHqwHiwG70TTBxGaiWwjCTGgOUgJiF1J8wMRAIUA34B4Q76HUBelAfJYSA0CuMIEaRP8wGIkGMA54bgQIMACAmkXJi0hKJQAAAABJRU5ErkJggg==) no-repeat 10px center;
  text-decoration: none; }

h1 tt, h1 code {
  font-size: inherit; }

h2 tt, h2 code {
  font-size: inherit; }

h3 tt, h3 code {
  font-size: inherit; }

h4 tt, h4 code {
  font-size: inherit; }

h5 tt, h5 code {
  font-size: inherit; }

h6 tt, h6 code {
  font-size: inherit; }

h1 {
  font-size: 28px;
  color: black; }

h2 {
  font-size: 24px;
  border-bottom: 1px solid #cccccc;
  color: black; }

h3 {
  font-size: 18px; }

h4 {
  font-size: 16px; }

h5 {
  font-size: 14px; }

h6 {
  color: #777777;
  font-size: 14px; }

p, blockquote, ul, ol, dl, li, table, pre {
  margin: 15px 0; }

hr {
  background: transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC) repeat-x 0 0;
  border: 0 none;
  color: #cccccc;
  height: 4px;
  padding: 0;
}

body > h2:first-child {
  margin-top: 0;
  padding-top: 0; }
body > h1:first-child {
  margin-top: 0;
  padding-top: 0; }
  body > h1:first-child + h2 {
    margin-top: 0;
    padding-top: 0; }
body > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child {
  margin-top: 0;
  padding-top: 0; }

a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {
  margin-top: 0;
  padding-top: 0; }

h1 p, h2 p, h3 p, h4 p, h5 p, h6 p {
  margin-top: 0; }

li p.first {
  display: inline-block; }
li {
  margin: 0; }
ul, ol {
  padding-left: 30px; }

ul :first-child, ol :first-child {
  margin-top: 0; }

dl {
  padding: 0; }
  dl dt {
    font-size: 14px;
    font-weight: bold;
    font-style: italic;
    padding: 0;
    margin: 15px 0 5px; }
    dl dt:first-child {
      padding: 0; }
    dl dt > :first-child {
      margin-top: 0; }
    dl dt > :last-child {
      margin-bottom: 0; }
  dl dd {
    margin: 0 0 15px;
    padding: 0 15px; }
    dl dd > :first-child {
      margin-top: 0; }
    dl dd > :last-child {
      margin-bottom: 0; }

blockquote {
  border-left: 4px solid #dddddd;
  padding: 0 15px;
  color: #777777; }
  blockquote > :first-child {
    margin-top: 0; }
  blockquote > :last-child {
    margin-bottom: 0; }

table {
  padding: 0;border-collapse: collapse; }
  table tr {
    border-top: 1px solid #cccccc;
    background-color: white;
    margin: 0;
    padding: 0; }
    table tr:nth-child(2n) {
      background-color: #f8f8f8; }
    table tr th {
      font-weight: bold;
      border: 1px solid #cccccc;
      text-align: left;
      margin: 0;
      padding: 6px 13px; }
    table tr td {
      border: 1px solid #cccccc;
      text-align: left;
      margin: 0;
      padding: 6px 13px; }
    table tr th :first-child, table tr td :first-child {
      margin-top: 0; }
    table tr th :last-child, table tr td :last-child {
      margin-bottom: 0; }

img {
  max-width: 100%; }

span.frame {
  display: block;
  overflow: hidden; }
  span.frame > span {
    border: 1px solid #dddddd;
    display: block;
    float: left;
    overflow: hidden;
    margin: 13px 0 0;
    padding: 7px;
    width: auto; }
  span.frame span img {
    display: block;
    float: left; }
  span.frame span span {
    clear: both;
    color: #333333;
    display: block;
    padding: 5px 0 0; }
span.align-center {
  display: block;
  overflow: hidden;
  clear: both; }
  span.align-center > span {
    display: block;
    overflow: hidden;
    margin: 13px auto 0;
    text-align: center; }
  span.align-center span img {
    margin: 0 auto;
    text-align: center; }
span.align-right {
  display: block;
  overflow: hidden;
  clear: both; }
  span.align-right > span {
    display: block;
    overflow: hidden;
    margin: 13px 0 0;
    text-align: right; }
  span.align-right span img {
    margin: 0;
    text-align: right; }
span.float-left {
  display: block;
  margin-right: 13px;
  overflow: hidden;
  float: left; }
  span.float-left span {
    margin: 13px 0 0; }
span.float-right {
  display: block;
  margin-left: 13px;
  overflow: hidden;
  float: right; }
  span.float-right > span {
    display: block;
    overflow: hidden;
    margin: 13px auto 0;
    text-align: right; }

code, tt {
  margin: 0 2px;
  padding: 0 5px;
  white-space: nowrap;
  border: 1px solid #eaeaea;
  background-color: #f8f8f8;
  border-radius: 3px; }

pre code {
  margin: 0;
  padding: 0;
  white-space: pre;
  border: none;
  background: transparent; }

.highlight pre {
  background-color: #f8f8f8;
  border: 1px solid #cccccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px; }

pre {
  background-color: #f8f8f8;
  border: 1px solid #cccccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px; }
  pre code, pre tt {
    background-color: transparent;
    border: none; }

@media screen and (min-width: 914px) {
    body {
        width: 854px;
        margin:0 auto;
    }
}
@media print {
	pre,code {
		word-wrap: break-word;
	}	
	/*
	table, pre {
		page-break-inside: avoid;
	}
	*/
}
</style>
<title>15.md</title>
</head>
<body>
<p style="text-align:center">
    <a href="./14.html">&laquo; 上一章</a> |
    <a href="./index.html">首页</a>
</p>

<h2>15.游戏引擎和路径（Game Physics and Paths）</h2>

<p>这是个复杂，高级的教程展现了使用Blender的游戏引擎和路径如何创建一个动画。一个球体会下落到一个平面上，沿着一个路径移动，然后掉到一个盒子里。</p>

<p>Blender可以记录基于物理的动作到一个对象的IPO。这个功能允许一个记录的物理序列被渲染作为一个动画。由于路径独立于物理来控制物理对象，路径运动没有特殊的干预不会被记录。所以让我们干预一下。</p>

<h3>设置环境</h3>

<ol>
<li>按下CTRL-x创建新文件</li>
<li>按下OK来确认</li>
<li><p>点击SR:2-Model，然后改变它为SR:1-Animation：</p>

<p><img src="./img/15/image211.png" alt=""></p></li>
<li><p>分离3D view窗口的右边为两个新的窗口</p></li>
<li><p>设置上面窗口为IPO Curve编辑器</p></li>
<li><p>设置下面的窗口为Text编辑器</p></li>
<li><p>移除Outliner窗口来增加3D view的空间，结果如下：</p>

<p><img src="./img/15/image213.png" alt=""></p></li>
</ol>

<h3>对象</h3>

<ol>
<li>Add&gt;Mesh&gt;UVSphere</li>
<li>点击OK来接受默认的选项</li>
<li>按下s，.25，然后Enter来缩小球体</li>
<li>按下g，x，2，然后Enter向右移动球体</li>
<li>按下g，y，2，然后Enter向后移动球体</li>
<li>按下g，z，4，然后Enter来向上移动球体</li>
<li>Add&gt;Mesh&gt;Plane</li>
<li>按下s，5，然后Enter来改变屏幕比例</li>
<li><p>按下NUM-1切换到侧视图</p>

<p><img src="./img/15/image215.png" alt=""></p></li>
<li><p>Add&gt;Curve&gt;Path</p></li>
<li><p>按下g，y，2，然后Enter来往后移动Path</p></li>
<li><p>按下g，z，.25，然后Enter来向上移动Path</p></li>
<li><p>Transform&gt;Mirror&gt;X Local</p></li>
<li><p>按下NUM-7切换到顶视图</p></li>
<li><p>按下Tab来编辑Path</p></li>
<li><p>按下a取消选择所有的点</p></li>
<li><p>点击RMB来选择最后的点（最左边）</p></li>
<li><p>按下SHIFT-S，然后点击Selection-&gt;Cursor</p></li>
<li><p>按下g，z，1.5，然后Enter来向上移动最后的点</p></li>
<li><p>点击RMB来选择倒数第二的点</p></li>
<li><p>按下g，x，1，然后Enter对齐倒数第二个点和最后一个点</p></li>
<li><p>按下g，z，2，然后Enter向上移动倒数第二个点</p></li>
<li><p>按下SHIFT-S，然后点击Cursor-&gt;Selection</p></li>
</ol>

<p>旋转场景，可以看到类似下面的视图：</p>

<p><img src="./img/15/image217.png" alt=""> </p>

<h3>材质</h3>

<ol>
<li>按下Tab来停止编辑Path</li>
<li>按下F5开启材质按钮</li>
<li>在Cube上点击SHIFT-RMB</li>
<li>重命名Material为Cube</li>
<li>在Plane上点击SHIFT-RMB</li>
<li>点击Add New</li>
<li>重命名Material为Plane</li>
</ol>

<h3>记录路径IPO</h3>

<ol>
<li>按下NUM-7切换到顶视图</li>
<li>Add&gt;Empty</li>
<li>按下NUM-7切换到顶视图</li>
<li>在Path上点击SHIFT-RMB</li>
<li>按下CTRL-p开启parenting目录</li>
<li>点击Follow Path使Empty为Path父对象</li>
<li><p>复制粘贴下面的代码到Text窗口</p>

<pre><code># This script is used to map the IPO curve of an object as it travels
# through frames of an animation. The algorithm follows:
#
# 1. Calculate number of steps needed to animate at given framerate.
# 2. Get the selected object.
# 3. Duplicate the selected object (which will hold the generated IPO).
# 4. Reset the duplicate object.
# 5. Loop over the number of frames at the calculated framerate.
# 6. Set the active frame.
# 7. Position the duplicate object to the same place as the selected one.
# 8. Copy the selected object&#39;s location and rotation into the duplicate&#39;s IPO.
#
# Usage:
# (1) Select the object that follows a curve.
# (2) Load this script in Blender&#39;s Text window.
# (3) Move the mouse to the Text window.
# (4) Press Alt-p.
#

import Blender
from Blender import Object, Scene

framesPerSecond = Scene.GetCurrent().getRenderingContext().fps
firstFrame      = 0
lastFrame       = 100
stepsPerFrame   = (lastFrame - firstFrame) / framesPerSecond

selected = Object.GetSelected()[0]

Object.Duplicate()
duplicate = Object.GetSelected()[0]
duplicate.clrParent()
duplicate.clearIpo()

for frame in range( firstFrame, lastFrame, stepsPerFrame ):
  Blender.Set( &#39;curframe&#39;, frame )
  duplicate.setMatrix( selected.getMatrix() )
  duplicate.insertIpoKey( Object.LOC )
  duplicate.insertIpoKey( Object.ROT )
</code></pre></li>
<li><p>改变脚本名字为copy-path.py</p></li>
<li><p>保存脚本为copy-path.py</p></li>
<li><p>点击RMB来选择Empty</p></li>
<li><p>将鼠标移动到Text窗口</p></li>
<li><p>按下Alt-p执行脚本</p></li>
<li><p>将鼠标移动到3D窗口</p></li>
<li><p>按下DEL，然后Enter删除Empty.001</p></li>
<li><p>点击RMB选择Empty</p></li>
<li><p>按下Alt-p</p></li>
<li><p>点击Clear Parent来移除Path为Empty的父对象</p></li>
<li><p>重置IPO为frame 0</p></li>
<li><p>在IPO窗口，设置Empty使用新创建的IPO数据块</p>

<p><img src="./img/15/image219.png" alt=""></p></li>
<li><p>点击RMB来选择Path</p></li>
<li><p>按下m，2，然后Enter将Path移动到另一层</p></li>
<li><p>按下F7为对象按钮</p></li>
<li><p>点击RMB来选择Empty</p></li>
<li><p>设置TimeOffset为180</p></li>
</ol>

<h3>Game Engine Actors</h3>

<ol>
<li>按下F4到Logic按钮</li>
<li>点击RMB选择球体</li>
<li>点击Actor</li>
<li>点击Dynamic</li>
<li>点击Bounds</li>
<li>设置Radius为0.75</li>
<li>改变Box为Sphere（作为bounds类型）</li>
<li>点击RMB来选择Plane</li>
<li>点击Actor</li>
<li>点击Bounds</li>
</ol>

<h3>Game Engine Logic</h3>

<p>当球体碰撞到碰面，下面的情况会发生：</p>

<ul>
<li>球体将Empty作为父对象 </li>
<li>Empty播放它的IPO </li>
<li>球体的IPO的关键帧被记录作为每一帧</li>
</ul>

<h3>逻辑块-Empty</h3>

<ol>
<li>点击RMB来选择Empty</li>
<li>点击Add Property</li>
<li>设置名字为collision</li>
<li>改变类型为Bool</li>
<li>点击Add，在Sensors下面</li>
<li>设置sensor名字为s.copy</li>
<li>点击Add，在Sensors下面</li>
<li>改变sensor类型从Always到Property</li>
<li>设置sensor的名字为s.ipo</li>
<li>设置Prop的值为：collision</li>
<li>设置Value的值为：True</li>
<li>点击Add，在Controllers下面</li>
<li>设置controller名字为c.copy</li>
<li>点击Add，在Controllers下面</li>
<li>设置controller名字为c.ipo</li>
<li>点击Add，在Actuators下面</li>
<li>设置actuator名字为a.copy</li>
<li>改变actuator类型从Motion到Property</li>
<li>改变类型从Assign到Copy</li>
<li>设置Prop值为collision</li>
<li>设置OB值为Sphere</li>
<li>设置Prop值为collision</li>
<li>点击Add，在Actuators下面</li>
<li>改变类型从Motion到Ipo</li>
<li>设置actuator名字为a.ipo</li>
<li>设置End的值为100</li>
<li>连接Sensor copy到Controller copu再到Actuator copy</li>
<li>连接Sensor ipo到Controller ipo再到Actuator ipo</li>
</ol>

<p>逻辑看起来如下：</p>

<p><img src="./img/15/image221.png" alt=""></p>

<p>逻辑块表示Blender不断复制球体的collision属性到Empty的属性，并且以同样的名字。一旦collision属性设定为True，Empty被指示不断的重复它的IPO。仍然设定球体的父对象为Empty，恰当的时候移除父子关系，记录球体完整的IPO曲线。</p>

<h3>逻辑块-球体-Sensors</h3>

<ol>
<li>点击Add Property</li>
<li>设置名字为collision</li>
<li>改变类型为Bool</li>
<li>点击Add Property</li>
<li>设定名字为time</li>
<li>改变类型为Timer</li>
<li>点击Add，在Sensors下面</li>
<li>改变名字为s.plane</li>
<li>改变sensor类型为Collision</li>
<li>打开M/P</li>
<li>设定M/P的值为Plane</li>
<li>点击Add，在Sensors下面</li>
<li>设定名字为s.time</li>
<li>改变sensor类型为Property</li>
<li>打开Active TRUE level triggering</li>
<li>改变类型为Interval</li>
<li>设定Prop值为time</li>
<li>设定Min值为4.0</li>
<li>设定Max值为4.1</li>
<li>点击Add，在Sensors下面</li>
<li>设定名字为s.start</li>
<li>关闭Active TRUE level triggering</li>
<li>点击Add，在Sensors下面</li>
<li>设定名字为s.record</li>
<li>设定f值为2</li>
<li>打开Active TRUE level triggering</li>
<li>点击Add，在Sensors下面</li>
<li>设定名字为s.stop</li>
<li>改变sensor类型为Collision</li>
<li>打开M/P</li>
<li>设定M/P值为Cube</li>
</ol>

<h3>逻辑块-球体-Controllers</h3>

<ol>
<li>点击Add，在Sensors下面，五次</li>
<li><p>设定sensors名字，从上到下为：</p>

<p>c.plane</p>

<p>c.time</p>

<p>c.start</p>

<p>c.record</p>

<p>c.stop</p></li>
<li><p>改变c.start和c.record的controller类型为Python</p></li>
<li><p>创建新的text在Text窗口</p></li>
<li><p>复制粘贴下面的代码到Text窗口：</p>

<pre><code># This script is used to record the IPO curve of an object as it is
# assaulted by the Game Physics engine. It should be executed automatically
# via Logic Blocks. The algorithm follows:
#
# 1. Get the object being controlled by physics.
# 2. Create a new IPO for recording the motion of that object.
# 3. Store the IPO curves for use by the frame recorder.
#

import Blender

# Get the name of the object being controlled by physics.
#
gameObject = GameLogic.getCurrentController().getOwner()
objectName = gameObject.getName()[2:]

# Create an IPO of type Object named &#39;Recorded IPO&#39;.
#
blenderObject = Blender.Object.Get( objectName )
ipo = Blender.Ipo.New( &#39;Object&#39;, &#39;Recorded IPO&#39; )
blenderObject.setIpo( ipo )

# Get the position of gameObject as IPO curves.
#
locx = ipo.addCurve( &#39;LocX&#39; )
locy = ipo.addCurve( &#39;LocY&#39; )
locz = ipo.addCurve( &#39;LocZ&#39; )

# Keep a reference to the curves in a global variable. The variable
# (GameLogic.rec) is used by a script that records the position of the
# game Object per frame.
#
GameLogic.rec = [gameObject, locx, locy, locz]
</code></pre></li>
<li><p>改变脚本名字为record-ipo.py</p></li>
<li><p>保存脚本为record-ipo.py</p></li>
<li><p>创建一个text在Text窗口</p></li>
<li><p>复制粘贴下面的代码到Text窗口：</p>

<pre><code>#
# This script is used to record the position of an object as it travels
# through each frame, independent of the Game Physics. If Blender is set
# to record Game Physics to IPO, toggle that menu item OFF. This is a
# replacement. The algorithm follows:
#
# 1. Get the object being controlled by physics.
# 2. Get the object&#39;s position (for a given frame).
# 3. Update the recorded curves (stored in the global variable GameLogic.rec).
#
import Blender
from Blender import Scene

gameObject = GameLogic.getCurrentController().getOwner()

position = gameObject.getPosition()
frame = gameObject.time * Scene.GetCurrent().getRenderingContext().fps

# Only try to update the curves if the variable has been initialised.
#
if hasattr( GameLogic, &#39;rec&#39; ):
    # Set the curves for the X, Y, and Z axis.
    #
    GameLogic.rec[1].addBezier( (frame, position[0]) )
    GameLogic.rec[1].update()
    GameLogic.rec[2].addBezier( (frame, position[1]) )
    GameLogic.rec[2].update()
    GameLogic.rec[3].addBezier( (frame, position[2]) )
    GameLogic.rec[3].update()
</code></pre></li>
<li><p>设置Script值：c.start为record-ipo.py</p></li>
<li><p>设置Script值：c.record为record-frame.py</p></li>
<li><p>点击Add，在Actuators下面，五次</p></li>
<li><p>改变actuators类型，从上到下为：</p>

<p>Property</p>

<p>Parent</p>

<p>Property</p>

<p>Parent</p>

<p>Game</p></li>
<li><p>设置actuators的名字，从上到下为：</p>

<p>a.start.parent</p>

<p>a.parent.empty</p>

<p>a.stop.parent</p>

<p>a.parent.none</p>

<p>a.stop</p></li>
<li><p>从上到下：</p>

<p>设置Prop值为: to collision.</p>

<p>设置Value值为: to True.</p>

<p>设置OB值为: to Empty.</p>

<p>设置Prop值为: to collision.</p>

<p>设置Value值为: to False.</p>

<p>改变Set Parent为Remove Parent.</p>

<p>改变Start new game为Quit this game.</p></li>
<li><p>连接Sensors到Controllers再到Actuators</p>

<p><img src="./img/15/image223.png" alt=""></p></li>
</ol>

<h3>渲染动画</h3>

<ol>
<li>移动鼠标到3D窗口</li>
<li>按下p来调用物理引擎</li>
<li>按下ALT-a使用IPO曲线来播放动画</li>
<li>Render&gt;Render Animation</li>
</ol>

</body>
</html>